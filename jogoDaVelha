.data
    jogador1: .word 1
    jogador2: .word 0
    caracter: .asciiz "|"
    espaco: .byte ' '
    linha: .asciiz "\n_ _ _\n"
    jogador_1: .word 0
    jogador_2: .word 1
    vez: .asciiz "Vez do jogador "
    escolha: .asciiz "Deseja continuar jogando? S/n"

.text
.globl main
main:
    jal inicializa_tabuleiro
    jal imprime_tabuleiro
    li $v0, 10
    syscall
    
inicializa_tabuleiro:
    addi $t0, $zero, 2
    addi $t1, $zero, 2
    addi $t2, $zero, 2
    addi $t3, $zero, 2
    addi $t4, $zero, 2
    addi $t5, $zero, 2
    addi $t6, $zero, 2
    addi $t7, $zero, 2
    addi $t8, $zero, 2
    jr $ra

# Funções para imprimir o tabuleiro do jogo da velha
imprime_linha_divisoria:
    addi $v0, $zero, 4
    la $a0, linha
    syscall 
    jr $ra

imprime_num:
    addi $v0, $zero, 1
    add $a0, $zero,$a1 
    syscall 
    jr $ra

imprime_espaco:
    addi $v0, $zero, 4
    la $a0, espaco
    syscall 
    jr $ra
    
imprime_barra:
    addi $v0, $zero, 4
    la $a0, caracter
    syscall 
    jr $ra

imprime_linha1:
    addi $sp, $sp, -4          # Alocação de espaço na pilha
    sw $ra, 0($sp)             # Salvar o endereço de retorno na pilha
    
    add $a1, $zero, $t0
    
    jal imprime_num
    jal imprime_barra
    add $a1, $zero, $t1
    jal imprime_num
    jal imprime_barra
    add $a1, $zero, $t2
    jal imprime_num
    
    lw $ra, 0($sp)             # Restaurar o endereço de retorno
    addi $sp, $sp, 4           # Desalocar da pilha
    jr $ra

imprime_linha2:
    addi $sp, $sp, -4          # Alocação de espaço na pilha
    sw $ra, 0($sp)             # Salvar o endereço de retorno na pilha
    
    add $a1, $zero, $t3
    jal imprime_num
    jal imprime_barra
    add $a1, $zero, $t4
    jal imprime_num
    jal imprime_barra
    add $a1, $zero, $t5
    jal imprime_num
    
    lw $ra, 0($sp)             # Restaurar o endereço de retorno
    addi $sp, $sp, 4           # Desalocar da pilha
    jr $ra

imprime_linha3:
    addi $sp, $sp, -4          # Alocação de espaço na pilha
    sw $ra, 0($sp)             # Salvar o endereço de retorno na pilha
    
    add $a1, $zero, $t6
    jal imprime_num
    jal imprime_barra
    add $a1, $zero, $t7
    jal imprime_num
    jal imprime_barra 
    add $a1, $zero, $t8
    jal imprime_num
    
    lw $ra, 0($sp)             # Restaurar o endereço de retorno
    addi $sp, $sp, 4           # Desalocar da pilha
    jr $ra

imprime_tabuleiro: 
    addi $sp, $sp, -4          # Alocação de espaço na pilha
    sw $ra, 0($sp)             # Salvar o endereço de retorno na pilha
    
    jal imprime_linha1
    jal imprime_linha_divisoria
    jal imprime_linha2
    jal imprime_linha_divisoria
    jal imprime_linha3
    
    lw $ra, 0($sp)             # Restaurar o endereço de retorno
    addi $sp, $sp, 4           # Desalocar da pilha
    jr $ra
